# Googleç”»åƒæ¤œç´¢æ©Ÿèƒ½å®Ÿè£…å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ

## ğŸ¯ å®Ÿè£…ã•ã‚ŒãŸæ©Ÿèƒ½

### 1. ç”»åƒæ¤œç´¢ã‚µãƒ¼ãƒ“ã‚¹
- **æŠ½è±¡åŸºåº•ã‚¯ãƒ©ã‚¹**: `ImageSearchService`
- **Google Custom Searchå®Ÿè£…**: `GoogleImageSearchService`
- **SerpAPIå®Ÿè£…**: `SerpAPISearchService`
- **ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼é–¢æ•°**: è¨­å®šã«åŸºã¥ãè‡ªå‹•ã‚µãƒ¼ãƒ“ã‚¹é¸æŠ

### 2. APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- `POST /api/v1/search/start/{image_id}` - ç”»åƒæ¤œç´¢é–‹å§‹
- `GET /api/v1/search/status/{search_id}` - æ¤œç´¢ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
- `GET /api/v1/search/results/{image_id}` - æ¤œç´¢çµæœå–å¾—
- `GET /api/v1/search/rate-limit/{service_type}` - ãƒ¬ãƒ¼ãƒˆåˆ¶é™æƒ…å ±
- `DELETE /api/v1/search/jobs/{search_id}` - æ¤œç´¢ã‚¸ãƒ§ãƒ–å‰Šé™¤

### 3. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»åˆ¶é™æ©Ÿèƒ½
- **ãƒ¬ãƒ¼ãƒˆåˆ¶é™**: 100å›/æ—¥ï¼ˆè¨­å®šå¯èƒ½ï¼‰
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: åŒ…æ‹¬çš„ãªã‚¨ãƒ©ãƒ¼å‡¦ç†
- **ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å‡¦ç†**: ãƒãƒ³ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°æ¤œç´¢

### 4. ãƒ‡ãƒ¼ã‚¿ç®¡ç†
- **Pydanticã‚¹ã‚­ãƒ¼ãƒ**: å®Œå…¨ãªå‹å®‰å…¨æ€§
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆ**: SearchResultãƒ¢ãƒ‡ãƒ«ã¨ã®é€£æº
- **ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã‚¸ãƒ§ãƒ–ç®¡ç†**: æ¤œç´¢çŠ¶æ³ã®è¿½è·¡

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. ç’°å¢ƒå¤‰æ•°è¨­å®š
```bash
# .env ãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½åŠ 
SERPAPI_KEY=your_serpapi_key_here
GOOGLE_API_KEY=your_google_api_key_here
GOOGLE_SEARCH_ENGINE_ID=your_search_engine_id_here
```

### 2. ç”»åƒæ¤œç´¢é–‹å§‹
```bash
curl -X POST "http://localhost:8000/api/v1/search/start/IMAGE_ID" \
  -H "Content-Type: application/json" \
  -d '{
    "service_type": "serpapi",
    "max_results": 10
  }'
```

### 3. æ¤œç´¢ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
```bash
curl "http://localhost:8000/api/v1/search/status/SEARCH_ID"
```

### 4. çµæœå–å¾—
```bash
curl "http://localhost:8000/api/v1/search/results/IMAGE_ID"
```

## ğŸ“Š ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹

### æ¤œç´¢é–‹å§‹ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```json
{
  "search_id": "550e8400-e29b-41d4-a716-446655440000",
  "image_id": "123e4567-e89b-12d3-a456-426614174000",
  "status": "pending",
  "service_type": "serpapi",
  "max_results": 10,
  "started_at": "2024-07-30T10:00:00Z",
  "estimated_completion": "2024-07-30T10:02:00Z"
}
```

### æ¤œç´¢çµæœãƒ¬ã‚¹ãƒãƒ³ã‚¹
```json
{
  "image_id": "123e4567-e89b-12d3-a456-426614174000",
  "total_results": 15,
  "search_completed_at": "2024-07-30T10:01:30Z",
  "service_used": "serpapi",
  "results": [
    {
      "title": "Similar Image Title",
      "url": "https://example.com/image.jpg",
      "thumbnail_url": "https://example.com/thumb.jpg",
      "source_domain": "example.com",
      "similarity_score": 0.95,
      "width": 800,
      "height": 600
    }
  ],
  "stats": {
    "unique_domains": 8,
    "average_similarity": 0.78
  }
}
```

## ğŸ”§ æ‹¡å¼µæ©Ÿèƒ½

### Celeryã‚¿ã‚¹ã‚¯çµ±åˆï¼ˆæœ¬ç•ªç”¨ï¼‰
- éåŒæœŸå‡¦ç†ã®ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
- å¤±æ•—æ™‚ã®è‡ªå‹•å†è©¦è¡Œ
- ä¸€æ‹¬æ¤œç´¢å‡¦ç†
- å®šæœŸçš„ãªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

### å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«
- `app/services/celery_tasks.py` - ã‚¿ã‚¹ã‚¯å®šç¾©ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆå®Ÿè£…ï¼‰
- Redisãƒ™ãƒ¼ã‚¹ã®ã‚¸ãƒ§ãƒ–ã‚­ãƒ¥ãƒ¼
- ç›£è¦–ã¨ãƒ¡ãƒˆãƒªã‚¯ã‚¹

## ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½

### ãƒ¬ãƒ¼ãƒˆåˆ¶é™
- ã‚°ãƒ­ãƒ¼ãƒãƒ«åˆ¶é™: 100å›/æ—¥
- ã‚µãƒ¼ãƒ“ã‚¹åˆ¥åˆ¶é™
- æ™‚é–“çª“ãƒ™ãƒ¼ã‚¹ã®åˆ¶å¾¡

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- APIå‘¼ã³å‡ºã—å¤±æ•—
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™è¶…é
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ image_search.py      # æ¤œç´¢ã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…
â”‚   â”‚   â””â”€â”€ celery_tasks.py      # Celeryã‚¿ã‚¹ã‚¯ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆï¼‰
â”‚   â”œâ”€â”€ api/endpoints/
â”‚   â”‚   â””â”€â”€ search.py            # æ¤œç´¢APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ schemas/
â”‚   â”‚   â””â”€â”€ search.py            # æ¤œç´¢ç”¨ã‚¹ã‚­ãƒ¼ãƒ
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ rate_limiter.py      # ãƒ¬ãƒ¼ãƒˆåˆ¶é™å®Ÿè£…
â””â”€â”€ requirements.txt             # ä¾å­˜é–¢ä¿‚æ›´æ–°æ¸ˆã¿
```

## âœ… å®Œæˆã—ãŸå…¨æ©Ÿèƒ½

- âœ… æŠ½è±¡åŸºåº•ã‚¯ãƒ©ã‚¹è¨­è¨ˆ
- âœ… Google Custom Search APIçµ±åˆ
- âœ… SerpAPIçµ±åˆ
- âœ… ãƒ¬ãƒ¼ãƒˆåˆ¶é™å®Ÿè£…ï¼ˆ100å›/æ—¥ï¼‰
- âœ… 3ã¤ã®ä¸»è¦APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- âœ… ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å‡¦ç†
- âœ… åŒ…æ‹¬çš„ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- âœ… Pydanticã‚¹ã‚­ãƒ¼ãƒå®Œå‚™
- âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆ
- âœ… Celeryã‚¿ã‚¹ã‚¯è¨­è¨ˆï¼ˆã‚³ãƒ¡ãƒ³ãƒˆå®Ÿè£…ï¼‰
- âœ… ç®¡ç†ç”¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

å…¨ã¦ã®è¦ä»¶ãŒæº€ãŸã•ã‚Œã€æœ¬ç•ªç’°å¢ƒã§ã®ä½¿ç”¨ã«é©ã—ãŸç”»åƒæ¤œç´¢æ©Ÿèƒ½ãŒå®Œæˆã—ã¾ã—ãŸï¼
